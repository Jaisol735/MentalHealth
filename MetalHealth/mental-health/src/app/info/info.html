<app-navbar></app-navbar>
<div class="home-container">
  
 

 
 <main class="main-content py-4">
   <div class="container">
    
   <section class="welcome-section mb-4">
     <div class="row align-items-center g-3">
       <div class="col-12 col-lg-8">
         <h2 class="welcome-title h4 mb-2">
           {{ getGreeting() }}, {{ currentUser?.name }}!
         </h2>
         <p class="welcome-subtitle text-secondary mb-0">
           Welcome to your healthcare dashboard. Here you can find doctors, manage appointments, and access your health records.
         </p>
       </div>
     </div>
     
     <div class="row g-3 mt-3">
       <div class="col-12 col-md-4">
         <div class="card h-100 shadow-sm">
           <div class="card-body d-flex align-items-center gap-3">
             <div class="stat-icon text-primary">
               <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                 <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
               </svg>
             </div>
             <div class="stat-info">
               <h3 class="stat-number h4 mb-0">{{ doctors.length }}</h3>
               <p class="stat-label text-secondary mb-0">Available Doctors</p>
             </div>
           </div>
         </div>
       </div>
       
       <div class="col-12 col-md-4">
         <div class="card h-100 shadow-sm">
           <div class="card-body d-flex align-items-center gap-3">
             <div class="stat-icon text-primary">
               <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                 <circle cx="12" cy="12" r="10"/>
                 <polyline points="12,6 12,12 16,14"/>
               </svg>
             </div>
             <div class="stat-info">
               <h3 class="stat-number h4 mb-0">24/7</h3>
               <p class="stat-label text-secondary mb-0">Support Available</p>
             </div>
           </div>
         </div>
       </div>
       
       <div class="col-12 col-md-4">
         <div class="card h-100 shadow-sm">
           <div class="card-body d-flex align-items-center gap-3">
             <div class="stat-icon text-primary">
               <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                 <path d="M9 11H5a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h4l3 3V8l-3 3z"/>
                 <path d="M22 9l-6 6"/>
                 <path d="M16 9l6 6"/>
               </svg>
             </div>
             <div class="stat-info">
               <h3 class="stat-number h4 mb-0">Secure</h3>
               <p class="stat-label text-secondary mb-0">Health Records</p>
             </div>
           </div>
         </div>
       </div>
     </div>
   </section>

   
   <section class="doctors-section">
     <div class="section-header text-center mb-4">
       <h2 class="section-title h4 mb-1">Available Doctors</h2>
       <p class="section-subtitle text-secondary">Connect with our qualified healthcare professionals</p>
     </div>

     <div class="text-danger mb-3" *ngIf="errorMessage">
       {{ errorMessage }}
     </div>

     <div class="d-flex flex-column align-items-center my-4" *ngIf="isLoadingDoctors">
       <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
         <path d="M21 12a9 9 0 11-6.219-8.56"/>
       </svg>
       <p class="mb-0">Loading doctors...</p>
     </div>

    <div class="row g-3" *ngIf="!isLoadingDoctors && doctors.length > 0">
      <div class="col-12 col-md-6 col-lg-4" *ngFor="let doctor of doctors">
        <div class="card h-100 shadow-sm" 
             [id]="'doctor-' + doctor.doctor_id"
             [class.highlighted-doctor]="isDoctorHighlighted(doctor.doctor_id)"
             [class.doctor-card]="true">
          <div class="card-body">
            <div class="d-flex align-items-center mb-3">
              <div class="doctor-avatar me-3">
                <span class="speciality-icon">{{ getSpecialityIcon(doctor.speciality) }}</span>
              </div>
              <div class="doctor-info">
                <h3 class="doctor-name h5 mb-1 clickable-doctor-name">Dr. {{ doctor.name }}</h3>
                <p class="doctor-speciality text-secondary mb-0">{{ doctor.speciality }}</p>
              </div>
            </div>
            
            <p class="doctor-description text-secondary">{{ doctor.details }}</p>
            
            <div class="doctor-contact d-flex align-items-center gap-2 mb-3">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
              </svg>
              <span>{{ doctor.phoneno }}</span>
            </div>
            
            <div class="d-flex gap-2">
              <button class="btn btn-outline-primary btn-sm">Contact</button>
              <button class="btn btn-primary btn-sm">Book Appointment</button>
            </div>
          </div>
        </div>
      </div>
    </div>

     <div class="text-center text-secondary py-5" *ngIf="!isLoadingDoctors && doctors.length === 0 && !errorMessage">
       <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" class="mb-3">
         <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
       </svg>
       <h3 class="h5">No Doctors Available</h3>
       <p class="mb-0">There are currently no doctors in our system. Please check back later.</p>
     </div>
   </section>
  </div>
 </main>
</div>
